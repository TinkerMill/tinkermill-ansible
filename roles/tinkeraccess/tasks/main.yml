---
# tasks file for tinkeraccess

# Use git module to clone repository:
- name: Clone repository
  git:
    bare: no
    clone: yes
    dest: "{{ tinkeraccess_repo_dest }}"
    repo: "{{ tinkeraccess_repo_source }}"
  tags:
    - tinkeraccess
    - files

# Run the install script:
- name: Run the install script
  shell: "{{ tinkeraccess_repo_dest }}/install.sh"
  args:
    chdir: "{{ tinkeraccess_repo_dest }}"
    creates: /etc/init.d/tinkerserver
  tags:
    - tinkeraccess
    - files

# Disable client:
- name: Disable tinkerAccess client
  service:
    enabled: no 
    name: tinkerclient
    state: stopped
  tags:
    - tinkeraccess
    - services

# Enable server:
- name: Enable tinkerAccess server
  service:
    enabled: yes
    name: tinkerserver
    state: started
  tags:
    - tinkeraccess
    - services

